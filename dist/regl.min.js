(function(pa){if("object"===typeof exports&&"undefined"!==typeof module)module.a=pa();else if("function"===typeof define&&define.xb)define([],pa);else{var d;"undefined"!==typeof window?d=window:"undefined"!==typeof global?d=global:"undefined"!==typeof self?d=self:d=this;d.cc=pa()}})(function(){return function d(f,c,r){function a(e,J){if(!c[e]){if(!f[e]){var q="function"==typeof require&&require;if(!J&&q)return q(e,!0);if(b)return b(e,!0);q=Error("Cannot find module '"+e+"'");throw q.code="MODULE_NOT_FOUND",
q;}q=c[e]={a:{}};f[e][0].call(q.a,function(b){var c=f[e][1][b];return a(c?c:b)},q,q.a,d,f,c,r)}return c[e].a}for(var b="function"==typeof require&&require,J=0;J<r.length;J++)a(r[J]);return a}({1:[function(d,f){function c(){this.s=!1;this.K=this.z=this.y=this.x=0;this.buffer=null;this.size=0;this.B=!1;this.type=5126;this.A=this.h=this.offset=0}var r=d("./constants/dtypes.json");Object.assign(c.prototype,{Ra:function(a,b){return this.s?a.s&&this.buffer===a.buffer&&this.size===b&&this.B===a.B&&this.type===
a.type&&this.offset===a.offset&&this.h===a.h&&this.A===a.A:!a.s&&this.x===a.x&&this.y===a.y&&this.z===a.z&&this.K===a.K},set:function(a,b){(this.s=a.s)?(this.buffer=a.buffer,this.size=b,this.B=a.B,this.type=a.type,this.offset=a.offset,this.h=a.h,this.A=a.A):(this.x=a.x,this.y=a.y,this.z=a.z,this.K=a.K)}});f.a=function(a,b,d){function e(){for(var b=Array(16),a=0;16>a;++a)b[a]=new c;this.lb=b;this.top=0}function f(b){for(var a=b.lb,e=b.top;a.length-1<=e;)a.push(new c);return a[++b.top]}var q=b.O,I=
{};b=a.getParameter(a.MAX_VERTEX_ATTRIBS);for(var C=Array(b),t=0;t<b;++t)C[t]=new c;Object.assign(e.prototype,{Ha:function(b,a,e,c){var t=f(this);t.s=!1;t.x=b;t.y=a;t.z=e;t.K=c},jb:function(b,a,e,c,t,r,d){var J=f(this);J.s=!0;J.buffer=b;J.size=a;J.offset=e;J.h=c;J.A=t;J.B=r;J.type=d},ac:function(b){if("number"===typeof b)this.Ha(b,0,0,0);else if(Array.isArray(b))this.Ha(b[0],b[1],b[2],b[3]);else{var a=d.fa(b),e=0,c=0,t=0,f=0,q=!1,m=5126;a?m=a.F:(a=d.fa(b.buffer),e=b.size||0,c=b.h||0,t=b.offset||0,
f=b.A||0,q=b.B||!1,m=a.F,"type"in b&&(m=r[b.type]));this.jb(a,e,t,c,f,q,m)}},pop:function(){--this.top}});return{sa:C,attributes:I,bind:function(b,e,c,t){t=c.size||t;if(!e.Ra(c,t)){if(c.s){e.s||a.enableVertexAttribArray(b);e.buffer!==c.buffer&&c.buffer.bind();a.vertexAttribPointer(b,t,c.type,c.B,c.h,c.offset);var r=q.Aa;r&&r.vertexAttribDivisorANGLE(b,c.A)}else e.s&&a.disableVertexAttribArray(b),a.vertexAttrib4f(b,c.x,c.y,c.z,c.K);e.set(c,t)}},c:function(b){b in I||(I[b]=new e)}}}},{"./constants/dtypes.json":8}],
2:[function(d,f){function c(b,a){switch(b){case 5121:return new Uint8Array(a);case 5123:return new Uint16Array(a);case 5125:return new Uint32Array(a);case 5120:return new Int8Array(a);case 5122:return new Int16Array(a);case 5124:return new Int32Array(a);case 5126:return new Float32Array(a);default:return null}}var r=d("./check"),a=d("./is-typed-array"),b=d("./is-ndarray"),J=d("./constants/arraytypes.json"),e=d("./constants/dtypes.json"),m=d("./values"),q={"static":35044,dynamic:35048,stream:35040};
f.a=function(d){function f(b,a){this.id=k++;this.buffer=b;this.type=a;this.usage=35044;this.byteLength=0;this.da=1;this.data=null;this.F=5121}function t(b){d.isBuffer(b.buffer)||(b.buffer=d.createBuffer());b.bind();d.bufferData(b.type,b.data||b.byteLength,b.usage)}function x(b){r(b.buffer,"buffer must not be deleted already");d.isBuffer(b.buffer)&&d.deleteBuffer(b.buffer);b.buffer=null;delete G[this.id]}var k=0,G={};f.prototype.bind=function(){d.bindBuffer(this.type,this.buffer)};return{create:function(k,
m,H){function Q(k){var d=k||{};if(Array.isArray(d)||a(d)||b(d))d={data:d};else if("number"===typeof d)d={length:d|0};else if(null===d||void 0===d)d={};r.type(d,"object","buffer arguments must be an object, a number or an array");"usage"in d?(r.b(d.usage,q,"invalid buffer usage"),D.usage=q[d.usage]):D.usage=35044;k=0;"type"in d&&(r.b(d.type,e,"invalid buffer type"),k=e[d.type]);var G=d.da|0||1,f=0,m=null;if("data"in d)if(m=d.data,null===m)f=d.length|0;else{if(b(m)){var G=m.shape,f=m.h,d=m.offset,x=
0,p=0,S=0,H=0;1===G.length?(x=G[0],p=1,S=f[0],H=0):2===G.length?(x=G[0],p=G[1],S=f[0],H=f[1]):r.g("invalid shape");k=k||J[Object.prototype.toString.call(m)]|0||5126;for(var G=p,f=c(k,x*p),m=m.data,T=0,C=0;C<x;++C)for(var K=0;K<p;++K)f[T++]=m[S*C+H*K+d];m=f}else if(Array.isArray(m))if(0<m.length&&Array.isArray(m[0])){G=m[0].length;k=k||5126;d=c(k,m.length*G);f=m;m=G;for(x=H=0;x<f.length;++x)for(S=f[x],p=0;p<m;++p)d[H++]=S[p];m=d}else k=k||5126,m=c(k,m);else r.Ea(m,"invalid data type buffer data"),
k=k||J[Object.prototype.toString.call(m)]|0;f=m.byteLength}else"length"in d&&(f=d.length|0,r.V(f,"buffer length must be a nonnegative integer"));D.data=m;D.F=k||5121;D.byteLength=f;D.da=G;t(D);return Q}var K=d.createBuffer(),D=new f(K,m);G[D.id]=D;H||Q(k);Q.T="buffer";Q.qa=D;Q.l=function(){x(D)};return Q},clear:function(){m(G).forEach(x)},refresh:function(){m(G).forEach(t)},fa:function(b){return b&&b.qa instanceof f?b.qa:null}}}},{"./check":3,"./constants/arraytypes.json":7,"./constants/dtypes.json":8,
"./is-ndarray":16,"./is-typed-array":17,"./values":30}],3:[function(d,f){function c(a){a=Error("(regl) "+a);console.error(a);throw a;}var r=d("./is-typed-array");f.a=Object.assign(function(a,b){a||c(b)},{g:c,b:function(a,b,d){a in b||c("unknown parameter ("+a+")"+(d?": "+d:"")+". possible values: "+Object.keys(b).join())},type:function(a,b,d){typeof a!==b&&c("invalid parameter type"+(d?": "+d:"")+". expected "+b+", got "+typeof a)},Ea:function(a,b){r(a)||c("invalid parameter type"+(b?": "+b:"")+". must be a typed array")},
V:function(a,b){0<=a&&(a|0)===a||c("invalid parameter type, ("+a+")"+(b?": "+b:"")+". must be a nonnegative integer")},Ga:function(a,b,d){0>b.indexOf(a)&&c("invalid value"+(d?": "+d:"")+". must be one of: "+b)}})},{"./is-typed-array":17}],4:[function(d,f){f.a="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date}},{}],5:[function(d,f){f.a=function(){function c(){var b=[],a=[];return Object.assign(function(){b.push.apply(b,Array.prototype.slice.call(arguments))},
{c:function(){var c="v"+d++;a.push(c);0<arguments.length&&(b.push(c,"="),b.push.apply(b,Array.prototype.slice.call(arguments)),b.push(";"));return c},toString:function(){return[0<a.length?"var "+a+";":"",b.join("")].join("")}})}var d=0,a=[],b=[],f={};return{link:function(e){var c="g"+d++;a.push(c);b.push(e);return c},block:c,W:function(b){var a=[],q=c(),I=q.toString;return f[b]=Object.assign(q,{N:function(){var b="a"+d++;a.push(b);return b},toString:function(){return["function(",a.join(),"){",I(),
"}"].join("")}})},compile:function(){var c=['"use strict";return {'];Object.keys(f).forEach(function(b){c.push('"',b,'":',f[b].toString(),",")});c.push("}");return Function.apply(null,a.concat([c.join("")])).apply(null,b)}}}},{}],6:[function(d,f){function c(b){switch(b){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function r(a,c,e,d){var f,r=",";switch(c){case 5126:f="1f";break;case 35664:f="2fv";break;
case 35665:f="3fv";break;case 35666:f="4fv";break;case 35670:case 5124:f="1i";break;case 35671:case 35667:f="2iv";break;case 35672:case 35668:f="3iv";break;case 35673:case 35669:f="4iv";break;case 35674:f="Matrix2fv";r=",false,";break;case 35675:f="Matrix3fv";r=",false,";break;case 35676:f="Matrix4fv";r=",false,";break;default:b.g("unsupported uniform type")}return a+".uniform"+f+"("+e+r+d+");"}function a(b){return b+"["+b+".length-1]"}var b=d("./check"),J=d("./codegen"),e=d("./constants/primitives.json"),
m=d("./constants/dtypes.json"),q={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},I={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,
">=":518,always:519},C={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386};f.a=function(d,f,k,G,p,T,H,Q,K,D,V,R){function aa(k,f,m,x,H){function p(b){var a=b.id,v=U[a];if(v)return v;v=b.Da?h.c(E(b.data),"(",la,",",Z,",",oa,")"):h.c(la,".",b.data);return U[a]=v}function T(b,a){return b.find(function(b){return b.name===a})}function u(b){return B&&!(b in f||b in H)}var D=J(),E=D.link,h=D.W("batch"),v=D.block(),A=h.c,n=h.N,g=E(d),
ha=E(k.ma),F=E(K.bind),oa=E(R),X=E(V.count),w=E(V.offset),fa=E(V.P),ea=E(V.j),z=E(G.elements),X=A(a(X)),w=A(a(w)),ea=A(a(ea)),z=A(a(z)),ga,ma,y=L.Aa;y&&(ga=A(a(fa)),ma=E(y));var B="elements"in f,fa=n(),n=n(),la=A(),Z=A(),U={};h(g,".useProgram(",ha,");");k.m.forEach(function(b){if(!(b.name in m)){var a=E(b.location),c=E(Q.m[b.name]),c=c+"["+c+".length-1]";35678===b.info.type||35680===b.info.type?(b=A(c+"._texture"),h(r(g,5124,a,b+".bind()")),v(b,".unbind();")):h(r(g,b.info.type,a,c))}});k.attributes.forEach(function(b){if(!(x.name in
x)){var a=E(K.attributes[b.name]);h(F,"(",b.location,",",E(K.sa[b.location]),",",a,".records[",a,".top]",",",c(b.info.type),");")}});B||h("if(",z,"){",g,".bindBuffer(",34963,",",z,".buffer.buffer);","}else{",g,".bindBuffer(",34963,",null);","}");h("for(",Z,"=0;",Z,"<",fa,";++",Z,"){",la,"=",n,"[",Z,"];");Object.keys(f).forEach(function(a){function v(b){h("if(",c,"){",g,".enable(",b,");}else{",g,".disable(",b,");}")}var c=p(f[a]);switch(a){case "cull.enable":v(2884);break;case "blend.enable":v(3042);
break;case "dither":v(3024);break;case "stencil.enable":v(2960);break;case "depth.enable":v(2929);break;case "scissor.enable":v(3089);break;case "polygonOffset.enable":v(32823);break;case "sample.alpha":v(32926);break;case "sample.enable":v(32928);break;case "depth.mask":h(g,".depthMask(",c,");");break;case "depth.func":a=E(I);h(g,".depthFunc(",a,"[",c,"]);");break;case "depth.range":h(g,".depthRange(",c,"[0],",c,"[1]);");break;case "blend.color":h(g,".blendColor(",c,"[0],",c,"[1],",c,"[2],",c,"[3]);");
break;case "blend.equation":a=E(O);h("if(typeof ",c,'==="string"){',g,".blendEquation(",a,"[",c,"]);","}else{",g,".blendEquationSeparate(",a,"[",c,".rgb],",a,"[",c,".alpha]);","}");break;case "blend.func":a=E(q);h(g,".blendFuncSeparate(",a,'["srcRGB" in ',c,"?",c,".srcRGB:",c,".src],",a,'["dstRGB" in ',c,"?",c,".dstRGB:",c,".dst],",a,'["srcAlpha" in ',c,"?",c,".srcAlpha:",c,".src],",a,'["dstAlpha" in ',c,"?",c,".dstAlpha:",c,".dst]);");break;case "stencil.mask":h(g,".stencilMask(",c,");");break;case "stencil.func":a=
E(I);h(g,".stencilFunc(",a,"[",c,'.cmp||"always"],',c,".ref|0,",'"mask" in ',c,"?",c,".mask:-1);");break;case "stencil.opFront":case "stencil.opBack":var ia=E(C);h(g,".stencilOpSeparate(","stencil.opFront"===a?1028:1029,",",ia,"[",c,'.fail||"keep"],',ia,"[",c,'.zfail||"keep"],',ia,"[",c,'.pass||"keep"]);');break;case "polygonOffset.offset":h(g,".polygonOffset(",c,".factor||0,",c,".units||0);");break;case "cull.face":h(g,".cullFace(",c,'==="front"?',1028,":",1029,");");break;case "lineWidth":h(g,".lineWidth(",
c,");");break;case "frontFace":h(g,".frontFace(",c,'==="cw"?',2304,":",2305,");");break;case "colorMask":h(g,".colorMask(",c,"[0],",c,"[1],",c,"[2],",c,"[3]);");break;case "sample.coverage":h(g,".sampleCoverage(",c,".value,",c,".invert);");break;case "scissor.box":a=h.c(c+".x||0");ia=h.c(c+".y||0");h(g,".scissor(",a,",",ia,",",'"w" in ',c,"?",c,".w:",g,".drawingBufferWidth-",a,",",'"h" in ',c,"?",c,".h:",g,".drawingBufferHeight-",ia,");");break;case "viewport":a=h.c(c+".x||0");ia=h.c(c+".y||0");h(g,
".viewport(",a,",",ia,",",'"w" in ',c,"?",c,".w:",g,".drawingBufferWidth-",a,",",'"h" in ',c,"?",c,".h:",g,".drawingBufferHeight-",ia,");");break;case "primitives":case "offset":case "count":case "elements":break;default:b.g("unsupported option for batch",a)}});var N=k.m,P=[];Object.keys(m).forEach(function(b){var a=T(N,b);if(a){var c=a.info.type,v=E(a.location);b=p(m[b]);35678===a.info.type||35680===a.info.type?(a=A(b+"._texture"),P.push(a),h(r(g,5124,v,a+".bind()"))):h(r(g,c,v,b))}});P.forEach(function(b){h(b,
".unbind();")});var aa=k.attributes;Object.keys(x).forEach(function(b){var a=T(aa,b);a&&h(F,"(",a.location,",",E(b.sa[a.location]),",",p(x[b]),",",c(a.info.type),");")});f.count?h(X,"=",p(f.count),";"):u("count")||h("if(",X,"){");f.offset&&h(w,"=",p(f.offset),";");f.j&&(k=E(e),h(ea,"=",k,"[",p(f.j),"];"));B&&(k=p(f.elements),h(z,"=",k,"?",k,"._elements:null;"));u("offset")&&h(w,"=0;");h("if(",z,"){");u("count")&&h(X,"=",z,".vertCount;","if(",X,">0){");u("primitive")&&h(ea,"=",z,".primType;");B&&h(g,
".bindBuffer(",34963,",",z,".buffer.buffer);");y&&(f.P&&h(ga,"=",p(f.P),";"),h("if(",ga,">0){",ma,".drawElementsInstancedANGLE(",ea,",",X,",",z,".type,",w,",",ga,");}else{"));h(g,".drawElements(",ea,",",X,",",z,".type,",w,");");y&&h("}");u("count")&&h("}");h("}else{");u("count")||(u("primitive")&&h(ea,"=",4,";"),y&&h("if(",ga,">0){",ma,".drawArraysInstancedANGLE(",ea,",",w,",",X,",",ga,");}else{"),h(g,".drawArrays(",ea,",",w,",",X,");}"),y&&h("}"));h("}}",v);return D.compile().Ma}var L=f.O,z=H.Oa,
O={add:32774,subtract:32778,"reverse subtract":32779};L.Fb&&(O.min=32775,O.max=32776);var U=0;return{U:function(b){var e=J(),k=e.link,f=e.W("draw"),m=f.c,x=k(d),q=k(b.ma),H=k(K.bind),p=k(V.count),D=k(V.offset),h=k(V.P),v=k(V.j),A=k(G.elements),n=[];f(x,".useProgram(",q,");");b.attributes.forEach(function(b){var a=k(K.attributes[b.name]);f(H,"(",b.location,",",k(K.sa[b.location]),",",a,".records[",a,".top]",",",c(b.info.type),");")});b.m.forEach(function(b){var a=k(b.location),c=k(Q.m[b.name]),c=c+
"["+c+".length-1]";35678===b.info.type||35680===b.info.type?(b=m(c+"._texture"),n.push(b),f(r(x,5124,a,b+".bind()"))):f(r(x,b.info.type,a,c))});n.forEach(function(b){f(b,".unbind();")});b=m(a(v));p=m(a(p));D=m(a(D));A=m(a(A));f("if(",p,"){");(q=L.Aa)?(h=m(a(h)),q=k(q),f("if(",A,"){",A,".bind();","if(",h,">0){",q,".drawElementsInstancedANGLE(",b,",",p,",",A,".type,",D,",",h,");}else{",x,".drawElements(",b,",",p,",",A,".type,",D,");}","}else if(",h,">0){",q,".drawArraysInstancedANGLE(",b,",",D,",",
p,",",h,");}else{",x,".drawArrays(",b,",",D,",",p,");}}")):f("if(",A,"){",x,".drawElements(",b,",",p,",",A,".type,",D,");}","}else{",x,".drawArrays(",b,",",D,",",p,");}");return e.compile().U},Na:function(c,d,f,t,r,x,p){function u(b){var a=ma[b];return a?a:a=ma[b]=v(z[b])}function T(b,a){var c=u(b);y(c,".push(",a,");");B(c,".pop();")}function E(b){var a=b.id,c=ra[a];if(c)return c;c=b.Da?N.c(v(b.data),"(",na,",0,",sa,")"):N.c(na,".",b.data);return ra[a]=c}var h=J(),v=h.link,A=h.block,n=h.W,g=U++,ha=
v(H.D),F=v(D.Va),oa=v(D.sb),X=v(D.ib),w={count:v(V.count),offset:v(V.offset),P:v(V.P),j:v(V.j)},fa=v(G.elements),ea=v(e),L=v(I),ga=v(C),ma={},y=A(),B=A(),la=!1;Object.keys(c).forEach(function(a){var l=c[a];switch(a){case "frag":la=!0;y(F,".push(",v(l),");");B(F,".pop();");break;case "vert":la=!0;y(oa,".push(",v(l),");");B(oa,".pop();");break;case "count":case "offset":case "instances":b.V(l,a);y(w[a],".push(",l,");");B(w[a],".pop();");break;case "primitive":b.b(l,e,"not a valid drawing primitive");
y(w.j,".push(",e[l],");");B(w.j,".pop();");break;case "elements":var g=G.Xa(l),l=!("primitive"in c);a=!("count"in c);g?(g=v(g),y(fa,".push(",g,");"),l&&y(w.j,".push(",g,".primType);"),a&&y(w.count,".push(",g,".vertCount);")):(y(fa,".push(null);"),l&&y(w.j,".push(",4,");"),a&&y(w.count,".push(0);"));l&&B(w.j,".pop();");a&&B(w.count,".pop();");"offset"in c||(y(w.offset,".push(0);"),B(w.offset,".pop();"));B(fa,".pop();");break;case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":b.type(l,
"boolean",a);T(a,l);break;case "depth.func":b.b(l,I,a);T(a,I[l]);break;case "depth.range":b(Array.isArray(l)&&2===l.length&&l[0]<=l[1],"depth range is 2d array");a=u(a);y(a,".push(",l[0],",",l[1],");");B(a,".pop();");break;case "blend.func":a=u(a);b.type(l,"object","blend func must be an object");var g="srcRGB"in l?l.gc:l.src,n="srcAlpha"in l?l.fc:l.src,d="dstRGB"in l?l.Eb:l.Qa,l="dstAlpha"in l?l.Db:l.Qa;b.b(g,q);b.b(n,q);b.b(d,q);b.b(l,q);y(a,".push(",q[g],",",q[d],",",q[n],",",q[l],");");B(a,".pop();");
break;case "blend.equation":a=u(a);"string"===typeof l?(b.b(l,O,"invalid blend equation"),y(a,".push(",O[l],",",O[l],");")):"object"===typeof l?(b.b(l.ob,O,"invalid blend equation rgb"),b.b(l.alpha,O,"invalid blend equation alpha"),y(a,".push(",O[l.ob],",",O[l.alpha],");")):b.g("invalid blend equation");B(a,".pop();");break;case "blend.color":b(Array.isArray(l)&&4===l.length,"blend color is a 4d array");a=u(a);y(a,".push(",l[0],",",l[1],",",l[2],",",l[3],");");B(a,".pop();");break;case "stencil.mask":b.type(l,
"number","stencil mask must be an integer");a=u(a);y(a,".push(",l,");");B(a,".pop();");break;case "stencil.func":b.type(l,"object","stencil func must be an object");g=l.yb||"keep";n=l.bc||0;l="mask"in l?l.Ub:-1;b.b(g,I,"invalid stencil func cmp");b.type(n,"number","stencil func ref");b.type(l,"number","stencil func mask");a=u(a);y(a,".push(",I[g],",",n,",",l,");");B(a,".pop();");break;case "stencil.opFront":case "stencil.opBack":b.type(l,"object",a);g=l.Ib||"keep";n=l.xc||"keep";l=l.Yb||"keep";b.b(g,
C,a);b.b(n,C,a);b.b(l,C,a);a=u(a);y(a,".push(",C[g],",",C[n],",",C[l],");");B(a,".pop();");break;case "polygonOffset.offset":b.type(l,"object",a);g=l.Hb||0;l=l.units||0;b.type(g,"number","offset.factor");b.type(l,"number","offset.units");a=u(a);y(a,".push(",g,",",l,");");B(a,".pop();");break;case "cull.face":g=0;"front"===l?g=1028:"back"===l&&(g=1029);b(!!g,"cull.face");l=u(a);y(l,".push(",g,");");B(l,".pop();");break;case "lineWidth":b(0<l&&"number"===typeof l,a);T(a,l);break;case "frontFace":g=
0;"cw"===l?g=2304:"ccw"===l&&(g=2305);b(!!g,"frontFace");l=u(a);y(l,".push(",g,");");B(l,".pop();");break;case "colorMask":b(Array.isArray(l)&&4===l.length,"color mask must be length 4 array");a=u(a);y(a,".push(",l.map(function(a){return!!a}).join(),");");B(a,".pop();");break;case "sample.coverage":b.type(l,"object",a);g="value"in l?l.value:1;l=!!l.Rb;b("number"===typeof g&&0<=g&&1>=g,"sample value");a=u(a);y(a,".push(",g,",",l,");");B(a,".pop();");break;case "viewport":case "scissor.box":b("object"===
typeof l&&l,a+" is an object");var g=l.x||0,n=l.y||0,k=d=-1;b("number"===typeof g&&0<=g,a+".x must be a positive int");b("number"===typeof n&&0<=n,a+".y must be a positive int");"w"in l&&(d=l.K,b("number"===typeof d&&0<=d,a+".w must be a positive int"));"h"in l&&(k=l.Qb,b("number"===typeof k&&0<=k,a+".h must be a positive int"));l=u(a);y(l,".push(",g,",",n,",",d,",",k,");");B(l,".pop();");break;default:b.g("unsupported parameter "+a)}});if(la){if(c.Ua&&c.rb)y(X,".push(",v(D.create(c.rb,c.Ua)),");");
else{var A=y.c(F,"[",F,".length-1]"),Z=y.c(oa,"[",oa,".length-1]"),qa=v(D.create);y(X,".push(",qa,"(",Z,",",A,"));")}B(X,".pop();")}Object.keys(d).forEach(function(a){Q.c(a);var b=v(Q.m[a]),c;a=d[a];"function"===typeof a&&a.T?c=v(a):Array.isArray(a)?c=v(a.slice()):c=+a;y(b,".push(",c,");");B(b,".pop();")});Object.keys(f).forEach(function(a){K.c(a);var c=v(K.attributes[a]),g=f[a];if("number"===typeof g)y(c,".pushVec(",+g,",0,0,0);");else if(b(!!g,"invalid attribute: "+a),Array.isArray(g))y(c,".pushVec(",
[g[0]||0,g[1]||0,g[2]||0,g[3]||0],");");else{var e=k.fa(g),n=0,d=0,A=0,t=0,F=!1,r=5126;e?r=e.F:(b.type(g,"object",'invalid attribute "'+a+'"'),e=k.fa(g.buffer),n=g.size||0,d=g.h||0,A=g.offset||0,t=g.A||0,F=g.B||!1,b(!!e,"invalid attribute "+a+".buffer"),r=e.F,"type"in g&&(b.b(g.type,m,"attribute type"),r=m[g.type]));b(!!e,"invalid attribute "+a+".buffer");b.V(d,a+".stride");b.V(A,a+".offset");b.V(t,a+".divisor");b.type(F,"boolean",a+".normalized");b.Ga(n,[0,1,2,3,4],a+".size");y(c,".pushPtr(",[v(e),
n,A,d,t,F,r].join(),");")}B(c,".pop();")});var N=h.block(),P=h.block(),sa,na;p&&(sa=v(R),na=y.c());var ra={};Object.keys(t).forEach(function(a){var g=E(t[a]);switch(a){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "lineWidth":case "depth.mask":a=u(a);N(a,".push(",g,");");P(a,".pop();");break;case "count":case "offset":case "instances":a=w[a];N(a,".push(",
g,");");P(a,".pop();");break;case "primitive":a=w.j;N(a,".push(",ea,"[",g,"]);");P(a,".pop();");break;case "depth.func":a=u(a);N(a,".push(",L,"[",g,"]);");P(a,".pop();");break;case "blend.func":a=u(a);var e=v(q);N(a,".push(",e,'["srcRGB" in ',g,"?",g,".srcRGB:",g,".src],",e,'["dstRGB" in ',g,"?",g,".dstRGB:",g,".dst],",e,'["srcAlpha" in ',g,"?",g,".srcAlpha:",g,".src],",e,'["dstAlpha" in ',g,"?",g,".dstAlpha:",g,".dst]);");P(a,".pop();");break;case "blend.equation":a=u(a);e=v(O);N("if(typeof ",g,
'==="string"){',a,".push(",e,"[",g,"],",e,"[",g,"]);","}else{",a,".push(",e,"[",g,".rgb],",e,"[",g,".alpha]);","}");P(a,".pop();");break;case "blend.color":a=u(a);N(a,".push(",g,"[0],",g,"[1],",g,"[2],",g,"[3]);");P(a,".pop();");break;case "stencil.mask":a=u(a);N(a,".push(",g,");");P(a,".pop();");break;case "stencil.func":a=u(a);N(a,".push(",L,"[",g,".cmp],",g,".ref|0,",'"mask" in ',g,"?",g,".mask:-1);");P(a,".pop();");break;case "stencil.opFront":case "stencil.opBack":a=u(a);N(a,".push(",ga,"[",
g,'.fail||"keep"],',ga,"[",g,'.zfail||"keep"],',ga,"[",g,'.pass||"keep"]);');P(a,".pop();");break;case "polygonOffset.offset":a=u(a);N(a,".push(",g,".factor||0,",g,".units||0);");P(a,".pop();");break;case "cull.face":a=u(a);N(a,".push(",g,'==="front"?',1028,":",1029,");");P(a,".pop();");break;case "frontFace":a=u(a);N(a,".push(",g,'==="cw"?',2304,":",2305,");");P(a,".pop();");break;case "colorMask":a=u(a);N(a,".push(",g,"[0],",g,"[1],",g,"[2],",g,"[3]);");P(a,".pop();");break;case "sample.coverage":a=
u(a);N(a,".push(",g,".value,",g,".invert);");P(a,".pop();");break;case "scissor.box":case "viewport":a=u(a);N(a,".push(",g,".x||0,",g,".y||0,",'"w" in ',g,"?",g,".w:-1,",'"h" in ',g,"?",g,".h:-1);");P(a,".pop();");break;case "elements":a=!("primitive"in t)&&!("primitive"in c);var e=!("count"in t)&&!("count"in c),n=!("offset"in t)&&!("offset"in c),d=N.c();N("if(",g,"){",d,"=",g,"._elements;",fa,".push(",d,");",a?w.j+".push("+d+".primType);":"",e?w.count+".push("+d+".vertCount);":"",n?w.offset+".push("+
d+".offset);":"","}else{",fa,".push(null);","}");P(fa,".pop();","if(",g,"){",a?w.j+".pop();":"",e?w.count+".pop();":"",n?w.offset+".pop();":"","}");break;default:b.g("unsupported dynamic option: "+a)}});Object.keys(r).forEach(function(a){Q.c(a);var b=v(Q.m[a]);a=E(r[a]);N(b,".push(",a,");");P(b,".pop();")});Object.keys(x).forEach(function(a){K.c(a);var b=v(K.attributes[a]);a=E(x[a]);N(b,".pushDyn(",a,");");P(b,".pop();")});A=n("scope");Z=A.N();qa=A.N();A(y);p&&A(na,"=",Z,";",N);A(qa,"();",p?P:"",
B);A=n("draw");A(y);p&&A(na,"=",A.N(),";",N);Z=a(X);A(ha,"();","if(",Z,")",Z,".draw(",p?na:"",");",p?P:"",B);var ka=n("batch");ka(y);p=ka.c(a(X));n=v(function(a,b,v){var e=a.ra[g];e||(e=a.ra[g]=aa(a,t,r,x,c));return e(b,v)});ka("if(",p,"){",ha,"();",n,"(",p,",",ka.N(),",",ka.N(),");");Object.keys(t).forEach(function(a){(a=ma[a])&&ka(a,".setDirty();")});ka("}",B);return h.compile()}}}},{"./check":3,"./codegen":5,"./constants/dtypes.json":8,"./constants/primitives.json":9}],7:[function(d,f){f.a={"[object Int8Array]":5120,
"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],8:[function(d,f){f.a={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126}},{}],9:[function(d,f){f.a={points:0,lines:1,"line loop":2,"line strip":3,triangles:4,"triangle strip":5,"triangle fan":6}},{}],10:[function(d,
f){function c(a,c){function e(){var c=window.innerWidth,e=window.innerHeight;a!==document.body&&(e=a.getBoundingClientRect(),c=e.right-e.left,e=e.top-e.bottom);d.width=I*c;d.height=I*e;Object.assign(d.style,{width:c+"px",height:e+"px"})}var d=document.createElement("canvas"),f=r(d,c);Object.assign(d.style,{border:0,margin:0,padding:0,top:0,left:0});a.appendChild(d);a===document.body&&(d.style.position="absolute",Object.assign(a.style,{margin:0,padding:0}));var I=+f.options.ka;window.addEventListener("resize",
e,!1);var C=f.options.wa;f.options=Object.assign({},f.options,{wa:function(){window.removeEventListener("resize",e);a.removeChild(d);C&&C()}});e();return f}function r(b,c){function e(a){try{return b.getContext(a,d)}catch(c){return null}}var d=c.Ob||{},f=e("webgl")||e("experimental-webgl")||e("webgl-experimental");a(f,"webgl not supported");return{ua:f,options:Object.assign({ka:window.devicePixelRatio},c)}}var a=d("./check");f.a=function(a){if("undefined"===typeof document||"undefined"===typeof HTMLElement)return{ua:a[0],
options:a[1]||{}};var d=document.body,e=a[1]||{};if("string"===typeof a[0])d=document.querySelector(a[0])||document.body;else if("object"===typeof a[0])if(a[0]instanceof HTMLElement)d=a[0];else{if(a[0]instanceof WebGLRenderingContext)return{ua:a[0],options:Object.assign({ka:1},e)};e=a[0]}return d.nodeName&&"CANVAS"===d.nodeName.toUpperCase()?r(d,e):c(d,e)}},{"./check":3}],11:[function(d,f){f.a=function(){return{j:[4],count:[0],offset:[0],P:[0]}}},{}],12:[function(d,f){function c(b,c){this.id=a++;
this.Da=b;this.data=c}function r(a){switch(typeof a){case "boolean":case "number":case "string":return new c(!1,a);case "function":return new c(!0,a);default:return r}}var a=0;f.a={Pa:r,Za:function(a){return"function"===typeof a&&!a.T||a instanceof c},qb:function(a,d){return a instanceof c?a:"function"===typeof a&&a!==r?new c(!0,a):new c(!1,d)}}},{}],13:[function(d,f){var c=d("./check"),r=d("./is-typed-array"),a=d("./is-ndarray"),b=d("./constants/primitives.json");f.a=function(d,e,f){function q(){this.buffer=
null;this.hb=4;this.type=this.Ka=0}var I=e.O;q.prototype.bind=function(){this.buffer.bind()};return{create:function(e){function d(e){var f=I.Vb;if(e)if("number"===typeof e)k(e);else{var m=null,H="static",q=0;Array.isArray(e)||r(e)||a(e)?m=e:(c.type(e,"object","invalid arguments for elements"),"data"in e&&(m=e.data),"usage"in e&&(H=e.usage),"length"in e&&(q=e.length));Array.isArray(m)||a(m)&&"array"===m.F||"type"in e?k({type:e.type||(f?"uint32":"uint16"),usage:H,data:m,length:q}):k({usage:H,data:m,
length:q});if(Array.isArray(m)||r(m))k.da=3}else k();m=x.buffer.byteLength;H=0;switch(x.buffer.F){case 5121:case 5120:H=5121;break;case 5123:case 5122:H=5123;m>>=1;break;case 5125:case 5124:c(f,"32 bit element buffers not supported");H=5125;m>>=2;break;default:c.g("invalid element buffer type")}f=4;q=x.buffer.da;1===q&&(f=0);2===q&&(f=1);3===q&&(f=4);"object"===typeof e&&("primitive"in e&&(f=e.j,c.b(f,b),f=b[f]),"count"in e&&(m=e.Ka|0));x.hb=f;x.Ka=m;x.type=H;return d}var x=new q,k=f.create(null,
34963,!0);x.buffer=k.qa;d(e);Object.assign(d,{T:"elements",za:x,l:function(){x.buffer.l();x.buffer=null}});return d},elements:[null],Xa:function(a){return a&&a.za instanceof q?a.za:null}}}},{"./check":3,"./constants/primitives.json":9,"./is-ndarray":16,"./is-typed-array":17}],14:[function(d,f){f.a=function(c){function d(){"oes_texture_float oes_texture_float_linear oes_texture_half_float oes_texture_half_float_linear oes_standard_derivatives oes_element_index_uint oes_fbo_render_mipmap webgl_depth_texture webgl_draw_buffers webgl_color_buffer_float ext_texture_filter_anisotropic ext_frag_depth ext_blend_minmax ext_shader_texture_lod ext_color_buffer_half_float ext_srgb angle_instanced_arrays webgl_compressed_texture_s3tc webgl_compressed_texture_atc webgl_compressed_texture_pvrtc webgl_compressed_texture_etc1".split(" ").forEach(function(b){try{a[b]=
c.getExtension(b)}catch(d){}})}var a={};d();return{O:a,refresh:d}}},{}],15:[function(d,f){f.a=function(){return{create:function(){},clear:function(){},refresh:function(){},Mb:function(){return null}}}},{}],16:[function(d,f){var c=d("./is-typed-array");f.a=function(d){return"object"===typeof d&&Array.isArray(d.shape)&&Array.isArray(d.h)&&"number"===typeof d.offset&&d.shape.length===d.h.length&&(Array.isArray(d.data)||c(d.data))}},{"./is-typed-array":17}],17:[function(d,f){var c=d("./constants/arraytypes.json");
f.a=function(d){return Object.prototype.toString.call(d)in c}},{"./constants/arraytypes.json":7}],18:[function(d,f){f.a=function(c,d){var a=d.O,b=1;a.Ta&&(b=c.getParameter(34047));return{zb:[c.getParameter(3410),c.getParameter(3411),c.getParameter(3412),c.getParameter(3413)],Cb:c.getParameter(3414),kc:c.getParameter(3415),lc:c.getParameter(3408),O:Object.keys(a).filter(function(b){return!!a[b]}),$a:b,Zb:c.getParameter(33901),lineWidth:c.getParameter(33902),viewport:c.getParameter(3386),Ab:c.getParameter(35661),
Bb:c.getParameter(34076),nb:c.getParameter(34024),pb:c.getParameter(34930),nc:c.getParameter(3379),attributes:c.getParameter(34921),rc:c.getParameter(36347),qc:c.getParameter(35660),pc:c.getParameter(36348),Lb:c.getParameter(36349),Pb:c.getParameter(35724),ec:c.getParameter(7937),vendor:c.getParameter(7936),version:c.getParameter(7938)}}},{}],19:[function(d,f){f.a=function(c,d){if("undefined"!==typeof document){var a;a=(a=/\.(\w+)(\?.*)?$/.exec(c))&&a[1]?a[1].toLowerCase():void 0;0<="avi asf gifv mov qt yuv mpg mpeg m2v mp4 m4p m4v ogg ogv vob webm wmv".split(" ").indexOf(a)?
(a=document.createElement("video"),a.autoplay=!0,a.loop=!0,d&&(a.crossOrigin=d),a.src=c):0<=["dds"].indexOf(a)?(a=new XMLHttpRequest,a.responseType="arraybuffer",a.open("GET",c,!0),a.send()):(a=new Image,d&&(a.crossOrigin=d),a.src=c);return a}return null}},{}],20:[function(d,f){var c=d("./check");f.a=function(d){function f(a){for(var b=ca,c=Y,e=0;e<h;++e){var k=Math.max(1,b+3>>2)*Math.max(1,c+3>>2)*W;A.C.push({target:a,o:e,width:b,height:c,data:new Uint8Array(d,v,k)});v+=k;b>>=1;c>>=1}}var M=new Int32Array(d);
c(M[0]===r,"invalid magic number for dds header");var ja=M[V];c(ja&G,"unsupported dds format");var ca=M[aa],Y=M[R],da=C,u=0,W=0,E=4;switch(M[O]){case T:W=8;ja&p?(E=3,u=J):u=e;break;case H:W=16;u=m;break;case Q:W=16;u=q;break;case K:W=8;u=I;break;default:c.g("unsupported dds texture format")}var h=1;M[z]&t&&(h=Math.max(1,M[L]));var v=M[D]+4,A={width:ca,height:Y,f:E,format:u,type:da,w:!0,ca:!1,C:[]},M=M[U];if(M&x)for(c((M&k)===k,"missing cubemap faces"),A.ca=!0,M=0;6>M;++M)f(b+M);else f(a);return A};
var r=542327876,a=3553,b=34069,J=33776,e=33777,m=33778,q=33779,I=36196,C=5121,t=131072,x=512,k=64512,G=4,p=64,T=827611204,H=861165636,Q=894720068,K=826496069,D=1,V=2,R=3,aa=4,L=7,z=20,O=21,U=28},{"./check":3}],21:[function(d,f){"function"===typeof requestAnimationFrame&&"function"===typeof cancelAnimationFrame?f.a={next:function(c){return requestAnimationFrame(c)},cancel:function(c){return cancelAnimationFrame(c)}}:f.a={next:function(c){setTimeout(c,30)},cancel:clearTimeout}},{}],22:[function(d,f){var c=
d("./check"),r=d("./is-typed-array");f.a=function(a,b){return function(d){var e=d||{};r(d)?e={data:e}:2===arguments.length?e={width:arguments[0]|0,height:arguments[1]|0}:"object"!==typeof d&&(e={});b.D();var f=b.viewport,q=e.x||0,I=e.y||0,C=e.width||f.width,f=e.height||f.height,t=C*f*4,e=e.data||new Uint8Array(t);c.Ea(e);c(e.byteLength>=t,"data buffer too small");a.pixelStorei(3333,4);a.readPixels(q,I,C,f,6408,5121,e);return e}}},{"./check":3,"./is-typed-array":17}],23:[function(d,f){var c=d("./check");
f.a=function(d,a,b){function f(){this.id=I++;this.H=null;this.format=32854;this.height=this.width=0}function e(a){d.isRenderbuffer(a.H)||(a.H=d.createRenderbuffer());a.bind();d.renderbufferStorage(36161,a.format,a.width,a.height)}function m(a){d.bindRenderbuffer(36161,null);d.isRenderbuffer(a.H)&&d.deleteRenderbuffer(a.H);a.H=null;delete C[a.dc]}var q={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168};a.Sa&&(q.srgba=35907);var I=0,C={};f.prototype.bind=function(){d.bindRenderbuffer(36161,
this.H)};return{create:function(a){function e(a){a=a||{};var d=0,f=0;"shape"in a?(f=a.shape,c(Array.isArray(f)&&2<=f.length,"invalid renderbuffer shape"),d=f[0]|0,f=f[1]|0):("radius"in a&&(d=f=a.kb|0),"width"in a&&(d=a.width|0),"height"in a&&(f=a.height|0));var k=b.nb;c(0<=d&&0<=f&&d<=k&&f<=k,"invalid renderbuffer size");this.width=Math.max(d,1);this.height=Math.max(f,1);this.format=32854;"format"in a&&(a=a.format,c.b(a,q,"invalid render buffer format"),this.format=q[a]);return e}var d=new f;C[d.id]=
d;e(a);Object.assign(e,{T:"renderbuffer",vb:d,l:m.bind(d)});return e},refresh:function(){Object.keys(C).forEach(e)},l:function(){Object.keys(C).forEach(m)}}}},{"./check":3}],24:[function(d,f){function c(a,b,c){this.name=a;this.location=b;this.info=c}var r=d("./check");f.a=function(a,b,d,e,f){function q(b,c){var d=G[b],e=d[c];e||(e=a.createShader(b),a.shaderSource(e,c),a.compileShader(e),a.getShaderParameter(e,a.COMPILE_STATUS)||r.g("Error compiling shader:\n"+a.getShaderInfoLog(e)),d[c]=e);return e}
function I(){Object.keys(G).forEach(function(b){Object.keys(G[b]).forEach(function(c){a.deleteShader(G[b][c])})});G[35632]={};G[35633]={}}function C(a,b){this.Wa=a;this.tb=b;this.ma=null;this.m=[];this.attributes=[];this.U=function(){};this.ra={}}function t(){T.forEach(function(a){a.l()});T.length=0;p={}}function x(){T.forEach(function(a){a.link()})}function k(){I();t()}var G={},p={},T=[];Object.assign(C.prototype,{link:function(){var b,k;b=q(a.FRAGMENT_SHADER,this.Wa);k=q(a.VERTEX_SHADER,this.tb);
var t=this.ma=a.createProgram();a.attachShader(t,b);a.attachShader(t,k);a.linkProgram(t);a.getProgramParameter(t,a.LINK_STATUS)||r.g("Error linking program:\n"+a.getProgramInfoLog(t));var x=a.getProgramParameter(t,a.ACTIVE_UNIFORMS),p=this.m=[];for(b=0;b<x;++b)if(k=a.getActiveUniform(t,b))if(1<k.size)for(var G=0;G<k.size;++G){var C=k.name.replace("[0]","["+G+"]");p.push(new c(C,a.getUniformLocation(t,C),k));e.c(C)}else p.push(new c(k.name,a.getUniformLocation(t,k.name),k)),e.c(k.name);x=a.getProgramParameter(t,
a.ACTIVE_ATTRIBUTES);p=this.attributes=[];for(b=0;b<x;++b)if(k=a.getActiveAttrib(t,b))p.push(new c(k.name,a.getAttribLocation(t,k.name),k)),d.c(k.name);this.U=f(this);this.ra={}},l:function(){a.deleteProgram(this.ma)}});k();return{create:function(a,b){var c=p[b];c||(c=p[b]={});var e=c[a];e||(e=new C(b,a),e.link(),c[a]=e,T.push(e));return e},clear:k,refresh:function(){G[35632]={};G[35633]={};x()},ib:[null],Va:["void main(){gl_FragColor=vec4(0,0,0,0);}"],sb:["void main(){gl_Position=vec4(0,0,0,0);}"]}}},
{"./check":3}],25:[function(d,f){f.a=function(c,d){var a=c.length,b=c.slice(),f=!0;return{push:function(){for(var c=0;c<a;++c)b.push(arguments[c]);f=!0},pop:function(){b.length-=a;f=!0},D:function(){var c=b.length-a;if(f){switch(a){case 1:d(b[c]);break;case 2:d(b[c],b[c+1]);break;case 3:d(b[c],b[c+1],b[c+2]);break;case 4:d(b[c],b[c+1],b[c+2],b[c+3]);break;case 5:d(b[c],b[c+1],b[c+2],b[c+3],b[c+4]);break;case 6:d(b[c],b[c+1],b[c+2],b[c+3],b[c+4],b[c+5]);break;default:d.apply(null,b.slice(c,b.length))}f=
!1}},Ia:function(){f=!0}}}},{}],26:[function(d,f){var c=d("./stack"),r=d("./codegen");f.a=function(a){function b(b,d){var e=c([!!d],function(c){c?a.enable(b):a.disable(b)});e.Jb=b;return e}var d={width:a.drawingBufferWidth,height:a.drawingBufferHeight},e={dither:b(3024),"blend.enable":b(3042),"blend.color":c([0,0,0,0],function(b,c,d,e){a.blendColor(b,c,d,e)}),"blend.equation":c([32774,32774],function(b,c){a.blendEquationSeparate(b,c)}),"blend.func":c([1,0,1,0],function(b,c,d,e){a.blendFuncSeparate(b,
c,d,e)}),"depth.enable":b(2929,!0),"depth.func":c([513],function(b){a.depthFunc(b)}),"depth.range":c([0,1],function(b,c){a.depthRange(b,c)}),"depth.mask":c([!0],function(b){a.depthMask(b)}),"cull.enable":b(2884),"cull.face":c([1029],function(b){a.cullFace(b)}),frontFace:c([2305],function(b){a.frontFace(b)}),colorMask:c([!0,!0,!0,!0],function(b,c,d,e){a.colorMask(b,c,d,e)}),lineWidth:c([1],function(b){a.lineWidth(b)}),"polygonOffset.enable":b(32823),"polygonOffset.offset":c([0,0],function(b,c){a.polygonOffset(b,
c)}),"sample.alpha":b(32926),"sample.enable":b(32928),"sample.coverage":c([1,!1],function(b,c){a.sampleCoverage(b,c)}),"stencil.enable":b(2960),"stencil.mask":c([-1],function(b){a.stencilMask(b)}),"stencil.func":c([519,0,-1],function(b,c,d){a.stencilFunc(b,c,d)}),"stencil.opFront":c([7680,7680,7680],function(b,c,d){a.stencilOpSeparate(1028,b,c,d)}),"stencil.opBack":c([7680,7680,7680],function(b,c,d){a.stencilOpSeparate(1029,b,c,d)}),"scissor.enable":b(3089),"scissor.box":c([0,0,-1,-1],function(b,
c,d,e){var f=d;0>d&&(f=a.drawingBufferWidth-b);d=e;0>e&&(d=a.drawingBufferHeight-c);a.scissor(b,c,f,d)}),viewport:c([0,0,-1,-1],function(b,c,e,f){var m=e;0>e&&(m=a.drawingBufferWidth-b);e=f;0>f&&(e=a.drawingBufferHeight-c);a.viewport(b,c,m,e);d.width=m;d.height=e})},f=r(),q=f.W("poll"),I=f.W("refresh");Object.keys(e).forEach(function(a){a=f.link(e[a]);q(a,".poll();");I(a,".setDirty();")});var C=f.compile();return{Oa:e,viewport:d,D:C.D,refresh:C.refresh,bb:function(){e.viewport.Ia();e["scissor.box"].Ia()}}}},
{"./codegen":5,"./stack":25}],27:[function(d,f){function c(a){return Array.isArray(a)&&(0===a.length||"number"===typeof a[0])}function r(a){if(!Array.isArray(a))return!1;var b=a.length;if(0===b||!Array.isArray(a[0]))return!1;for(var c=a[0].length,d=1;d<b;++d)if(!Array.isArray(a[d])||a[d].length!==c)return!1;return!0}function a(a){return Object.prototype.toString.call(a)}function b(b){return"[object HTMLCanvasElement]"===a(b)}function J(b){return"[object CanvasRenderingContext2D]"===a(b)}var e=d("./check"),
m=d("./is-typed-array"),q=d("./is-ndarray"),I=d("./load-texture"),C=d("./to-half-float"),t=d("./parse-dds"),x=[9984,9986,9985,9987];f.a=function(d,f,p,T,H){function Q(a){this.target=a;this.la=this.ea=!1;this.Ja=1;this.aa=37444;this.type=this.i=this.format=this.f=this.height=this.width=0;this.w=!1;this.y=this.x=this.offset=this.I=this.oa=this.X=this.o=0;this.ba=!1;this.crossOrigin=this.pa=this.canvas=this.video=this.u=this.data=null;this.S=this.ga=!1}function K(a){this.target=a;this.type=this.i=this.format=
this.height=this.width=0;this.M=this.L=33071;this.R=0;this.va=9728;this.Y=1;this.G=!1;this.Fa=4352}function D(a,b){var c,d,f=0,F=0,h=0,k=0,w=0,m=0,r=!1,q=!1,t=!1,u=0,y=[0,0,0,0,0,0],B=0,p=!1;for(c=0;c<b.length;++c){d=b[c];var k=k||d.width<<d.o,w=w||d.height<<d.o,f=f||d.type,F=F||d.format,h=h||d.i,m=m||d.f,q=q||d.ga,t=t||d.S,r=r||d.w,z=d.o;d=d.target;p=p||0<z;3553===d?u|=1<<z:(d=d-34069,y[d]|=1<<z,B|=1<<d)}a.ga=q;a.S=t;a.width=k;a.height=w;a.format=F;a.i=h;a.type=f;q=p?(k<<1)-1:1;if(3553===a.target)e(0===
B,"pixmap type must not contain cubemap faces"),e(u===q,"missing mip map data");else for(e(63===B,"missing cubemap faces"),c=0;6>c;++c)e(y[c]===q,"missing mip map data");c=0<=x.indexOf(a.R);a.G=!p&&(a.G||c);p=p||a.G;a.R?e(p===c,"min filter inconsistent with mipmap data"):a.R=p?9987:9728;p&&e(k===w&&!(k&k-1)&&!!k,"must be a square power of 2 to support mipmaps");a.G&&e(!r,"mipmap generation not supported for compressed textures");a.L=a.L||33071;a.M=a.M||33071;33071===a.L&&33071===a.M||e(!(k&k-1)&&
!!k&&!(w&w-1)&&!!w&&!B,"incompatible size for wrap mode, image must be a power of 2");(5126===f&&!R.Wb||36193===f&&!R.Xb)&&e(9728===this.va&&9728===this.R,"unsupported filter mode for float texture");for(c=0;c<b.length;++c)d=b[c],r=d.o,d.width&&e(d.width<<r===k,"inconsistent width"),d.height&&e(d.height<<r===w,"inconsistent width"),d.f?e(d.f===m,"inconsistent channels"):d.f=m,d.format?e(d.format===F,"inconsistent format"):d.format=F,d.i?e(d.i===h,"inconsistent internalformat"):d.i=h,d.type?e(d.type===
f,"inconsistent type"):d.type=f,d.ba&&e(5121===d.type&&6408===d.i,"incompatible format/type for copyTexImage2D")}function V(a,b){this.id=da++;this.target=a;this.J=b;this.v=this.xa=-1;this.Z=0;this.$=null;this.ia=new K(a);this.C=[]}var R=f.O,aa={"don't care":4352,"dont care":4352,nice:4354,fast:4353},L={repeat:10497,clamp:33071,mirror:33648},z={nearest:9728,linear:9729},O=Object.assign({"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987,
mipmap:9987},z),U={none:0,browser:37444},S={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},ba={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},M={};R.Sa&&(ba.hc=35904,ba.ic=35906);R.cb&&(S.Kb=5126);R.eb&&(S["half float"]=36193);R.ub&&(Object.assign(ba,{depth:6402,"depth stencil":34041}),Object.assign(S,{uint16:5123,uint32:5125,"depth stencil":34042}));R.vc&&Object.assign(M,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,
"rgba s3tc dxt5":33779});R.sc&&Object.assign(M,{"rgb arc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});R.uc&&Object.assign(M,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});R.tc&&(M["rgb etc1"]=36196);var ja=Array.prototype.slice.call(d.getParameter(34467));Object.keys(M).forEach(function(a){var b=M[a];0<=ja.indexOf(b)&&(ba[a]=b)});f=Object.keys(ba);p.mc=f;var ca=f.reduce(function(a,b){var c=ba[b];a[c]=6409===
c||6406===c||6409===c||6410===c||6402===c||34041===c?c:32855===c||0<=b.indexOf("rgba")?6408:6407;return a},{});Object.assign(Q.prototype,{ja:function(a){if("object"===typeof a&&a){"premultiplyAlpha"in a&&(e.type(a.la,"boolean","invalid premultiplyAlpha"),this.la=a.la);"flipY"in a&&(e.type(a.ea,"boolean","invalid texture flip"),this.ea=a.ea);"alignment"in a&&(e.Ga(a.La,[1,2,4,8],"invalid texture unpack alignment"),this.Ja=a.La);"colorSpace"in a&&(e.b(a.aa,U,"invalid colorSpace"),this.aa=U[a.aa]);if("format"in
a){var b=a.format;e.b(b,ba,"invalid texture format");this.i=ba[b];b in S&&(this.type=S[b]);b in M&&(this.w=!0)}"type"in a&&(b=a.type,e.b(b,S,"invalid texture type"),this.type=S[b]);var b=this.width,c=this.height,d=this.f;"shape"in a?(e(Array.isArray(a.shape)&&2<=a.shape.length,"shape must be an array"),b=a.shape[0],c=a.shape[1],3===a.shape.length&&(d=a.shape[2])):("radius"in a&&(b=c=a.kb),"width"in a&&(b=a.width),"height"in a&&(c=a.height),"channels"in a&&(d=a.f));this.width=b|0;this.height=c|0;this.f=
d|0;"stride"in a?(b=a.h,e(Array.isArray(b)&&2<=b.length,"invalid stride vector"),this.X=b[0],this.oa=b[1],3===b.length?this.I=b[2]:this.I=1,this.ha=!0):(this.I=1,this.X=this.I*d,this.oa=this.X*b);"offset"in a&&(this.offset=a.offset|0,this.ha=!0);"crossOrigin"in a&&(this.crossOrigin=a.crossOrigin)}},parse:function(d,f){this.o=f;this.width=this.width>>f;this.height=this.height>>f;var n=d;switch(typeof d){case "string":break;case "object":if(!d)return;this.ja(d);var g=d.data;if("string"===typeof g||
g&&(m(g)||c(g)||q(g)||b(g)||J(g)||"[object HTMLImageElement]"===a(g)||"[object HTMLVideoElement]"===a(g)||r(g)))n=d.data;break;case "undefined":return;default:e.g("invalid pixel data type")}"string"===typeof n&&(n=I(n,this.crossOrigin));var g=null,h=!1;this.w&&e(n instanceof Uint8Array||"[object XMLHttpRequest]"===a(n),"compressed texture data must be stored in a uint8array");if(null!==n)if(m(n))this.data=n;else if(c(n))g=n,h=!0;else if(q(n)){Array.isArray(n.data)?(g=n.data,h=!0):this.data=n.data;
var F=n.shape;this.width=F[0];this.height=F[1];3===F.length?this.f=F[2]:this.f=1;F=n.h;this.X=n.h[0];this.oa=n.h[1];3===F.length?this.I=n.h[2]:this.I=1;this.offset=n.offset;this.ha=!0}else if(b(n)||J(n))b(n)?this.canvas=n:this.canvas=n.canvas,this.width=this.canvas.width,this.height=this.canvas.height,this.na();else if("[object HTMLImageElement]"===a(n))this.u=n,n.complete?(this.width=n.naturalWidth,this.height=n.naturalHeight):(this.width=this.width||n.naturalWidth,this.height=this.height||n.naturalHeight,
this.S=!0),this.na();else if("[object HTMLVideoElement]"===a(n))this.video=n,1<n.readyState?(this.width=n.width,this.height=n.height):(this.width=this.width||n.width,this.height=this.height||n.height,this.S=!0),this.ga=!0,this.na();else if("[object XMLHttpRequest]"===a(n))this.pa=n,this.S=!0;else if(r(n)){var h=n.length,F=n[0].length,k=1,p,w,t,u;if(Array.isArray(n[0][0]))for(k=n[0][0].length,e(0<=k&&4>=k,"invalid number of channels for image data"),g=Array(h*F*k),p=u=0;p<h;++p)for(w=0;w<F;++w)for(t=
0;t<k;++t)g[u++]=n[p][w][t];else for(g=Array(h*F),p=u=0;p<h;++p)for(w=0;w<F;++w)g[u++]=n[p][w];this.width=h;this.height=F;this.f=k;h=!0}else d.ba&&(this.ba=!0,this.x=this.x|0,this.y=this.y|0,console.log(H),this.width=(this.width||H.width)|0,this.height=(this.height||H.height)|0,this.na());!this.type&&this.data&&(6402===this.format?this.data instanceof Uint16Array?this.type=5123:this.data instanceof Uint32Array&&(this.type=5125):this.data instanceof Float32Array&&(this.type=5126));this.i||(this.i=
[6409,6410,6407,6408][(this.f=this.f||4)-1],e(this.i,"invalid number of channels"));F=this.i;if(6402===F||34041===F)e(R.ub,"depth/stencil texture not supported"),6402===F&&e(5123===this.type||5125,"depth texture type must be uint16 or uint32"),34041===F&&e(34042===this.type,"depth stencil texture format must match type"),e(!this.data&&!g&&!this.u&&!this.video&&!this.canvas,"depth/stencil textures are for rendering only");n=this.format=ca[F];if(!this.f)switch(n){case 6409:case 6406:case 6402:this.f=
1;break;case 34041:case 6410:this.f=2;break;case 6407:this.f=3;break;default:this.f=4}n=this.type;5126===n?e(R.cb,"float texture not supported"):36193===n?e(R.eb,"half float texture not supported"):n||(n=6402===F?5125:5121);this.type=n;if(h)switch(n){case 5121:this.data=new Uint8Array(g);break;case 5123:this.data=new Uint16Array(g);break;case 5125:this.data=new Uint32Array(g);break;case 5126:this.data=new Float32Array(g);break;case 36193:this.data=C(g);break;case 33635:case 32820:case 32819:case 34042:e.g("unsupported format for automatic conversion");
break;default:e.g("unsupported type conversion")}if(this.data){if(this.ha){g=this.data;h=this.width;F=this.height;k=this.f;p=this.X;w=this.oa;t=this.I;u=this.offset;for(var x=new g.constructor(h*F*k),z=0,D=0;D<F;++D)for(var y=0;y<h;++y)for(var B=0;B<k;++B)x[z++]=g[w*D+p*y+t*B+u];this.data=x}switch(n){case 5121:e(this.data instanceof Uint8Array||this.data instanceof Uint8ClampedArray,"incompatible pixel type");break;case 33635:case 32820:case 32819:case 5123:case 36193:e(this.data instanceof Uint16Array,
"incompatible pixel type");break;case 5125:e(this.data instanceof Uint32Array,"incompatible pixel type");break;case 5126:e(this.data instanceof Float32Array,"incompatible pixel type");break;default:e.g("bad or missing pixel type")}}this.ha=!1},na:function(){this.format=this.i=6408;this.type=5121;this.f=4;this.w=!1},upload:function(a){d.pixelStorei(37440,this.ea);d.pixelStorei(37441,this.la);d.pixelStorei(37443,this.aa);d.pixelStorei(3317,this.Ja);var b=this.target,c=this.o,e=this.u,f=this.canvas,
h=this.video,m=this.data,r=this.i,w=this.format,p=this.type,q=this.width||Math.max(1,a.width>>c);a=this.height||Math.max(1,a.height>>c);h&&2<h.readyState?d.texImage2D(b,c,w,w,p,h):e&&e.complete?d.texImage2D(b,c,w,w,p,e):f?d.texImage2D(b,c,w,w,p,f):this.w?d.compressedTexImage2D(b,c,r,q,a,0,m):this.ba?(T(),d.copyTexImage2D(b,c,w,this.x,this.y,q,a,0)):m?d.texImage2D(b,c,w,q,a,0,w,p,m):d.texImage2D(b,c,w,q||1,a||1,0,w,p,null)}});Object.assign(K.prototype,{clear:function(){K.call(this,this.target)},parse:function(a){if("object"===
typeof a&&a){if("min"in a){var b=a.min;e.b(b,O);this.R=O[b]}"mag"in a&&(b=a.Tb,e.b(b,z),this.va=z[b]);var b=this.L,c=this.M;if("wrap"in a){var d=a.wc;"string"===typeof d?(e.b(d,L),b=c=L[d]):Array.isArray(d)&&(e.b(d[0],L),e.b(d[1],L),b=L[d[0]],c=L[d[1]])}else"wrapS"in a&&(b=a.L,e.b(b,L),b=L[b]),"wrapT"in a&&(c=a.M,e.b(c,L),c=L[c]);this.L=b;this.M=c;"anisotropic"in a&&(b=a.Y,e("number"===typeof b&&1<=b&&b<=p.$a,"aniso samples must be between 1 and "),this.Y=a.Y);if("mipmap"in a)switch(a=a.ab,typeof a){case "string":e.b(a,
aa,"invalid mipmap hint");this.Fa=aa[a];this.G=!0;break;case "boolean":this.G=!!a;break;case "object":break;default:e.g("invalid mipmap type")}}},upload:function(){var a=this.target;d.texParameteri(a,10241,this.R);d.texParameteri(a,10240,this.va);d.texParameteri(a,10242,this.L);d.texParameteri(a,10243,this.M);R.Ta&&d.texParameteri(a,34046,this.Y);this.G&&(d.hint(33170,this.Fa),d.generateMipmap(a))}});var Y=0,da=0,u={},W=[],E=p.pb,h=Array(E).map(function(){return null});Object.assign(V.prototype,{bind:function(){this.Z+=
1;var a=this.v;if(0>a){for(var b=0;b<E;++b){var c=h[b];if(!c||0>=c.Z){c&&(c.v=-1);h[b]=this;a=b;break}}a>=E&&e.g("insufficient number of texture units");this.v=a;d.activeTexture(33984+a);d.bindTexture(this.target,this.J);Y=a}return a},oc:function(){--this.Z},refresh:function(){var a=this.target,b=this.v;0<=b?(d.activeTexture(33984+b),Y=b):d.bindTexture(a,this.J);for(var a=this.C,c=this.ia,e=0;e<a.length;++e)a[e].upload(c);c.upload();0>b&&((b=h[Y])?d.bindTexture(b.target,b.J):(this.v=Y,h[Y]=this))},
update:function(a){function b(c,d){var e=d.ab,g;if(Array.isArray(e))for(var h=0;h<e.length;++h)g=new Q(c),g.ja(a),g.ja(d),g.parse(e[h],h),f.push(g);else g=new Q(c),g.ja(a),g.parse(d,0),f.push(g)}var c;this.Ba();var d=this.ia,f=this.C;d.clear();f.length=0;d.parse(a);if(3553===this.target)b(3553,a);else{var h=a.Gb||a;if(Array.isArray(h))for(e(6===h.length,"invalid number of faces in cube map"),c=0;6>c;++c)b(34069+c,h[c]);else if("string"!==typeof h)for(c=0;6>c;++c)b(34069+c,{})}D(d,f);d.S&&this.Ya();
d.ga&&(this.xa=W.length,W.push(this));this.refresh()},Ya:function(){function a(b,c,h){var k=t(h);e(k.format in ca,"unsupported dds texture format");k.ca?e(34067===f.target):e(3553===f.target);c&&e(1===k.C.length,"number of mip levels inconsistent");k.C.forEach(function(a){var e=new Q(k.ca?a.target:b);e.f=k.f;e.w=k.w;e.type=k.type;e.i=k.format;e.format=ca[k.format];e.width=a.width;e.height=a.height;e.o=a.o||c;e.data=a.data;d.push(e)})}function b(){for(var e=0;e<d.length;++e){var h=d[e],k=h.u,m=h.video,
r=h.pa;k&&k.complete?(h.width=k.naturalWidth,h.height=k.naturalHeight):m&&2<m.readyState?(h.width=m.width,h.height=m.height):r&&4===r.readyState&&(d[e]=d[d.length-1],d.pop(),r.removeEventListener("readystatechange",b),a(h.target,h.o,r.response))}D(c,d);f.refresh()}var c=this.ia,d=this.C,f=this;d.forEach(function(a){a.u&&!a.u.complete?a.u.addEventListener("load",b):a.video&&1>a.readyState?a.video.addEventListener("progress",b):a.pa&&a.pa.addEventListener("readystatechange",b)});this.$=function(){d.forEach(function(a){a.u?
a.u.removeEventListener("load",b):a.video&&a.video.removeEventListener("progress",b)})}},Ba:function(){this.$&&(this.$(),this.$=null);var a=this.xa;0<=a&&((W[a]=W[W.length-1]).id=a,W.pop(),this.xa=-1)},l:function(){e(this.J,"must not double free texture");0<=this.v&&(d.activeTexture(33984+this.v),Y=this.v,d.bindTexture(this.target,null),h[this.v]=null);this.Ba();d.deleteTexture(this.J);this.C=this.ia=this.J=null;delete u[this.id]}});return{create:function(a,b){function c(a,d,f,h,k,m){var n=a||{};
34067===b&&6===arguments.length&&(n=[a,d,f,h,k,m]);e.update(n)}var e=new V(b,d.createTexture());u[e.id]=e;c(a);Object.assign(c,{T:"texture",wb:e,l:function(){e.l()}});return c},refresh:function(){Object.keys(u).forEach(function(a){u[a].refresh()});for(var a=0;a<E;++a)h[a]=null;Y=0;d.activeTexture(33984)},clear:function(){for(var a=0;a<E;++a)d.activeTexture(33984+a),d.bindTexture(3553,null),h[a]=null;d.activeTexture(33984);Y=0;Object.keys(u).forEach(function(a){u[a].l()})},D:function(){for(var a=0;a<
W.length;++a)W[a].refresh()},Nb:function(){return null}}}},{"./check":3,"./is-ndarray":16,"./is-typed-array":17,"./load-texture":19,"./parse-dds":20,"./to-half-float":28}],28:[function(d,f){f.a=function(c){for(var d=new Float32Array(c),d=new Uint32Array(d.buffer),a=new Uint16Array(c.length),b=0;b<c.length;++b)if(isNaN(c[b]))a[b]=65535;else if(Infinity===c[b])a[b]=31744;else if(-Infinity===c[b])a[b]=64512;else{var f=d[b],e=f>>>31<<15,m=(f<<1>>>24)-127,f=f>>13&1023;a[b]=-24>m?e:-14>m?e+(f+1024>>-14-
m):15<m?e+31744:e+(m+15<<10)+f}return a}},{}],29:[function(d,f){f.a=function(){var c={};return{m:c,c:function(d){d in c||(c[d]=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]])}}}},{}],30:[function(d,f){f.a=function(c){return Object.keys(c).map(function(d){return c[d]})}},{}],31:[function(d,f){var c=d("./lib/check"),r=d("./lib/context"),a=d("./lib/extension"),b=d("./lib/limits"),J=d("./lib/buffer"),e=d("./lib/elements"),m=d("./lib/texture"),q=d("./lib/renderbuffer"),I=d("./lib/fbo"),C=d("./lib/uniform"),t=d("./lib/attribute"),
x=d("./lib/shader"),k=d("./lib/draw"),G=d("./lib/state"),p=d("./lib/compile"),T=d("./lib/read"),H=d("./lib/dynamic"),Q=d("./lib/raf"),K=d("./lib/clock");f.a=function(){function d(){ha=Q.next(d);h.count+=1;if(h.width!==z.drawingBufferWidth||h.height!==z.drawingBufferHeight)h.width=z.drawingBufferWidth,h.height=z.drawingBufferHeight,da.bb();var a=K();h.Ca=a-h.t;h.t=a;u.D();for(var b=0;b<g.length;++b)(0,g[b])(h.count,h.t,h.Ca);h.mb=K()-a}function f(){ha&&(Q.cancel(d),ha=0)}function R(a){f();a.preventDefault();
O.fb&&O.fb()}function aa(){U.refresh();S.refresh();u.refresh();W.refresh();E.refresh();ca.refresh();da.refresh();O.gb&&O.gb();d()}var L=r(Array.prototype.slice.call(arguments)),z=L.ua,O=L.options,U=a(z),L=b(z,U),S=J(z),ba=e(z,U,S),M=C(),ja=t(z,U,S,L),ca=x(z,U,ja,M,function(a){return A.U(a)}),Y=k(z,U,S),da=G(z,ca),u=m(z,U,L,function(){da.D()},da.viewport),W=q(z,U,L),E=I(z,U,u),h={count:0,start:K(),Ca:0,t:K(),mb:0,width:z.drawingBufferWidth,height:z.drawingBufferHeight,ka:O.ka},v=T(z,da),A=p(z,U,S,
ba,u,E,da,M,ja,ca,Y,h),n=z.canvas,g=[],ha=0;n&&(n.addEventListener("webglcontextlost",R,!1),n.addEventListener("webglcontextrestored",aa,!1));return Object.assign(function(a){function b(a){var c={},e={};Object.keys(a).forEach(function(b){var f=a[b];H.Za(f)?(d=!0,e[b]=H.qb(f,b)):c[b]=f});return{ta:e,ya:c}}c(!!a,"invalid args to regl({...})");c.type(a,"object","invalid args to regl({...})");var d=!1,e=b(a.m||{}),f=b(a.attributes||{});a=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+
"."+b]=d[b]})}}var c=Object.assign({},a);delete c.m;delete c.attributes;b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");return c}(a));var e=A.Na(a.ya,e.ya,f.ya,a.ta,e.ta,f.ta,d),g=e.U,h=e.Ma,k=e.scope,m=[];return function(a,b){var c;if("number"===typeof a){for(c=a|0;m.length<c;)m.push(null);c=h(a|0,m)}else c=Array.isArray(a)?h(a.length,a):"function"===typeof a?k(null,a):"function"===typeof b?k(a,b):g(a);return c}},{clear:function(a){var b=0;da.D();var d=a.color;
d&&(z.clearColor(+d[0]||0,+d[1]||0,+d[2]||0,+d[3]||0),b|=16384);"depth"in a&&(z.clearDepth(+a.depth),b|=256);"stencil"in a&&(z.clearStencil(a.stencil|0),b|=1024);c(!!b,"called regl.clear with no buffer specified");z.clear(b)},$b:H.Pa,elements:function(a){return ba.create(a)},buffer:function(a){return S.create(a,34962)},J:function(a){return u.create(a,3553)},ca:function(a){return 6===arguments.length?u.create(Array.prototype.slice.call(arguments),34067):u.create(a,34067)},H:function(a){return W.create(a)},
frame:function(a){g.push(a);!ha&&0<g.length&&d();return{cancel:function(){var b=g.find(function(b){return b===a});0>b||(g.splice(b,1),0>=g.length&&f())}}},jc:h,Sb:L,read:v,l:function(){f();n&&(n.removeEventListener("webglcontextlost",R),n.removeEventListener("webglcontextrestored",aa));ca.clear();E.clear();u.clear();S.clear();O.wa&&O.wa()}})}},{"./lib/attribute":1,"./lib/buffer":2,"./lib/check":3,"./lib/clock":4,"./lib/compile":6,"./lib/context":10,"./lib/draw":11,"./lib/dynamic":12,"./lib/elements":13,
"./lib/extension":14,"./lib/fbo":15,"./lib/limits":18,"./lib/raf":21,"./lib/read":22,"./lib/renderbuffer":23,"./lib/shader":24,"./lib/state":26,"./lib/texture":27,"./lib/uniform":29}]},{},[31])(31)});
